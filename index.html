<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Covoiturage U15 - Basket</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        h1, h2, h3 { text-align: center; }
        form { margin-bottom: 20px; }
        input, button, select { margin: 5px 0; padding: 5px; }
        #dateDisplay { font-size: 1.2em; text-align: center; margin-bottom: 20px; }
        #covoiturageList, #joueursList, #debugInfo { border-top: 1px solid #ccc; padding-top: 20px; }
        .section { margin-bottom: 40px; }
        #debugInfo { background-color: #f0f0f0; padding: 10px; margin-top: 20px; }
        .joueur-select { display: inline-block; margin-right: 10px; }
        .delete-btn { background-color: #ff4d4d; color: white; border: none; padding: 5px 10px; cursor: pointer; }
        .trajet-options { margin-top: 10px; }
        .joueurs-trajet { margin-top: 10px; padding: 10px; border: 1px solid #ccc; }
    </style>
</head>
<body>
    <h1>Covoiturage U15</h1>
    
    <div id="dateDisplay"></div>

    <div class="section">
        <h2>Ajouter un joueur</h2>
        <form id="joueurForm">
            <input type="text" id="nomJoueur" placeholder="Nom du joueur" required>
            <button type="submit">Ajouter un joueur</button>
        </form>
        <div id="joueursList"></div>
    </div>

    <div class="section">
        <h2>Ajouter un covoiturage</h2>
        <form id="covoiturageForm">
            <input type="text" id="nom" placeholder="Nom du conducteur" required>
            <input type="number" id="places" placeholder="Nombre de places disponibles" required min="1">
            <div class="trajet-options">
                <label><input type="checkbox" id="aller" name="trajet" value="aller" onchange="toggleJoueurSelection('aller')"> Aller</label>
                <label><input type="checkbox" id="retour" name="trajet" value="retour" onchange="toggleJoueurSelection('retour')"> Retour</label>
            </div>
            <div id="joueursSelectAller" class="joueurs-trajet" style="display: none;">
                <h3>Joueurs pour l'aller :</h3>
            </div>
            <div id="joueursSelectRetour" class="joueurs-trajet" style="display: none;">
                <h3>Joueurs pour le retour :</h3>
            </div>
            <button type="submit">Ajouter un covoiturage</button>
        </form>
        <div id="covoiturageList"></div>
    </div>

    <div id="debugInfo"></div>

    <script>
        // Le reste du script JavaScript reste inchangé
        // Configuration de Firebase (à remplacer par vos propres informations)
        const firebaseConfig = {
            apiKey: "AIzaSyBfr0A4LZbuFc8D8MI0wL_nfzO3Atbcqwk",
  authDomain: "covoiturage-u15.firebaseapp.com",
  databaseURL: "https://covoiturage-u15-default-rtdb.firebaseio.com",
  projectId: "covoiturage-u15",
  storageBucket: "covoiturage-u15.appspot.com",
  messagingSenderId: "83669001760",
  appId: "1:83669001760:web:b0d65f3832344dd928be45"
        };

        // Fonction pour afficher la date actuelle
        function updateDate() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('dateDisplay').textContent = now.toLocaleDateString('fr-FR', options);
        }

        // Fonction de débogage
        function debugLog(message) {
            console.log(message);
            const debugInfo = document.getElementById('debugInfo');
            debugInfo.innerHTML += `<p>${message}</p>`;
        }

        // Initialisation de Firebase
        try {
            firebase.initializeApp(firebaseConfig);
            debugLog("Firebase initialisé avec succès");
        } catch (error) {
            debugLog(`Erreur lors de l'initialisation de Firebase: ${error.message}`);
        }

        const database = firebase.database();

        const covoiturageRef = database.ref('covoiturage');
        const joueursRef = database.ref('joueurs');

        function toggleJoueurSelection(trajet) {
            const isChecked = document.getElementById(trajet).checked;
            document.getElementById(`joueursSelect${trajet.charAt(0).toUpperCase() + trajet.slice(1)}`).style.display = isChecked ? 'block' : 'none';
        }

        // Le reste des fonctions (ajouter un covoiturage, ajouter un joueur, supprimer un joueur, etc.) reste inchangé

        // Mettre à jour la date au chargement de la page
        updateDate();
        // Mettre à jour la date toutes les minutes
        setInterval(updateDate, 60000);
    </script>
</body>
</html>
