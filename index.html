<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Covoiturage Basket U15</title>
    <style>
        /* Vos styles CSS existants */
    </style>
    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
</head>
<body>
    <!-- Votre HTML existant -->

    <script>
        // Configuration Firebase
        const firebaseConfig = {
            // Remplacez ces valeurs par celles de votre projet Firebase
            apiKey: "AIzaSyBfr0A4LZbuFc8D8MI0wL_nfzO3Atbcqwk",
            authDomain: "covoiturage-u15.firebaseapp.com",
            databaseURL: "https://covoiturage-u15-default-rtdb.firebaseio.com",
            projectId: "covoiturage-u15",
            storageBucket: "covoiturage-u15.appspot.com",
            messagingSenderId: "83669001760",
        };

        // Initialiser Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        let joueurs = [];
        let conducteurs = [];

        // Fonction pour sauvegarder les données dans Firebase
        function sauvegarderDonnees() {
            database.ref('covoiturage').set({
                joueurs: joueurs,
                conducteurs: conducteurs
            });
        }

        // Fonction pour charger les données depuis Firebase
        function chargerDonnees() {
            database.ref('covoiturage').once('value').then((snapshot) => {
                const data = snapshot.val();
                if (data) {
                    joueurs = data.joueurs || [];
                    conducteurs = data.conducteurs || [];
                    mettreAJourListeJoueurs();
                    mettreAJourListeConducteurs();
                    mettreAJourSelectJoueurs();
                    mettreAJourSelectConducteurs();
                    afficherAssignations();
                }
            });
        }

        // Écouteur pour les mises à jour en temps réel
        database.ref('covoiturage').on('value', (snapshot) => {
            const data = snapshot.val();
            if (data) {
                joueurs = data.joueurs || [];
                conducteurs = data.conducteurs || [];
                mettreAJourListeJoueurs();
                mettreAJourListeConducteurs();
                mettreAJourSelectJoueurs();
                mettreAJourSelectConducteurs();
                afficherAssignations();
            }
        });

        // Modifier vos fonctions existantes pour appeler sauvegarderDonnees()
        function ajouterJoueur() {
            // Votre code existant
            sauvegarderDonnees();
        }

        function ajouterConducteur() {
            // Votre code existant
            sauvegarderDonnees();
        }

        function supprimerJoueur(index) {
            // Votre code existant
            sauvegarderDonnees();
        }

        function supprimerConducteur(index) {
            // Votre code existant
            sauvegarderDonnees();
        }

        function assignerJoueur() {
            // Votre code existant
            sauvegarderDonnees();
        }

        // Le reste de votre code JavaScript reste inchangé

        // Charger les données au démarrage
        chargerDonnees();
    </script>
</body>
</html>
